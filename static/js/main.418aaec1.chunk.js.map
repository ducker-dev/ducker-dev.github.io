{"version":3,"sources":["App/Components/PageHeader/index.js","App/Components/fetchs.js","App/Components/Post/index.js","App/Components/CreatePost/index.js","App/Pages/Posts/index.js","Redux/actions.js","App/Components/Comments/index.js","App/Pages/ViewPost/index.js","App/index.js","Redux/reducers.js","index.js"],"names":["PageHeader","className","to","dataInteraction","method","body","url","resultFunc","errorFunc","options","headers","JSON","stringify","fetch","then","response","json","text","result","catch","error","Post","props","changeForm","e","preventDefault","postTitle","textInputOne","current","value","postBody","textInputTwo","id","modifiedPost","parse","oldPosts","posts","slice","postForChange","find","post","title","getPosts","setState","change","showOption","alert","newPosts","filter","console","log","removeListeners","document","removeEventListener","handleClickOutside","handleKeyUp","addListeners","addEventListener","postRef","contains","target","keyCode","React","createRef","state","prevProps","prevState","snapshot","this","ref","onSubmit","required","type","defaultValue","onClick","classNames","width","height","viewBox","xmlns","d","fill","Component","CreatePost","handleSubmit","updatedPosts","push","openEditing","createPostRef","placeholder","Posts","length","map","key","mapDispatchToProps","payload","connect","store","Comments","textInput","getPost","comments","comment","ViewPost","match","params","res","App","exact","path","component","initialState","changeState","action","createStore","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.418aaec1.chunk.js","sourcesContent":["import React from 'react';\nimport {Link} from \"react-router-dom\";\n\nimport \"./style.scss\";\n\nfunction PageHeader() {\n  return (\n    <header className=\"header\">\n      <div className=\"container header__content\">\n        <nav>\n          <ul>\n            <li><Link to=\"/\">Перейти ко всем постам</Link></li>\n          </ul>\n        </nav>\n      </div>\n    </header>\n  );\n}\n\nexport default PageHeader;\n","const basePath = \"https://simpleblogapi.herokuapp.com\";\n\nexport const dataInteraction = (method, body, url, resultFunc, errorFunc ) => {\n  const options = {\n    method: method,\n    headers: {\n      \"Content-Type\": \"application/json;charset=utf-8\"\n    },\n    body: body ? JSON.stringify(body) : null\n  };\n  fetch(`${basePath}/${url}`, options)\n    .then(\n      method === \"GET\"\n        ? response => {\n          return response.json();\n        }\n        : response => response.text()\n    )\n    .then(result => resultFunc(result))\n    .catch(error => errorFunc(error));\n};","import React, {Component} from 'react';\nimport {Link} from \"react-router-dom\";\nimport classNames from \"classnames\";\n\nimport \"./style.scss\";\nimport {dataInteraction} from \"../fetchs\";\n\nclass Post extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.textInputOne = React.createRef();\n    this.textInputTwo = React.createRef();\n    this.postRef = React.createRef();\n    this.state = {\n      change: false,\n      showOption: false\n    }\n  }\n\n  changeForm = e => {\n    e.preventDefault();\n\n    let postTitle = this.textInputOne.current.value;\n    let postBody = this.textInputTwo.current.value;\n\n    dataInteraction(\n      \"PUT\",\n      {\n        \"title\": postTitle,\n        \"body\": postBody\n      },\n      `posts/${this.props.id}`,\n      (result) => {\n        const modifiedPost = JSON.parse(result);\n        let oldPosts = this.props.posts.slice();\n\n        if (modifiedPost.id) {\n          let postForChange = oldPosts.find(post => (\n            post.id === modifiedPost.id\n          ));\n          postForChange.title = modifiedPost.title;\n          postForChange.body = modifiedPost.body;\n          this.props.getPosts(oldPosts);\n          this.setState({change: false, showOption: false});\n        } else {\n          alert('Пост, который вы пытались изменить, был удален другим пользователем');\n          const newPosts = oldPosts.filter(post => post.id !== this.props.id);\n          this.props.getPosts(newPosts)\n        }\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  };\n\n  removeListeners = () => {\n    document.removeEventListener(\"click\", this.handleClickOutside);\n    document.removeEventListener(\"keydown\", this.handleKeyUp);\n  };\n\n  addListeners = () => {\n    document.addEventListener(\"click\", this.handleClickOutside);\n    document.addEventListener(\"keydown\", this.handleKeyUp);\n  };\n\n  handleClickOutside = e => {\n    if (!this.postRef.current.contains(e.target)) {\n      this.setState({change: false, showOption: false});\n      this.removeListeners();\n    }\n  };\n\n  handleKeyUp = e => {\n    if (e.keyCode === 27) {\n      this.setState({change: false, showOption: false});\n      this.removeListeners();\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.showOption && !prevState.showOption) {\n      this.addListeners();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  render() {\n    const {id, title, body, getPosts} = this.props;\n\n    return (\n      <div className=\"post\" ref={this.postRef}>\n        {\n          this.state.change\n            ? <div className=\"post__wrapper-form\">\n              <form className=\"post__change-form\" onSubmit={this.changeForm}>\n                <input className=\"post__input\"\n                       required\n                       type=\"text\"\n                       defaultValue={title}\n                       ref={this.textInputOne}/>\n                <input className=\"post__input\"\n                       required\n                       type=\"text\"\n                       defaultValue={body}\n                       ref={this.textInputTwo}/>\n                <button className=\"post__button\">\n                  Изменить пост\n                </button>\n              </form>\n            </div>\n            : <Link to={\"/view-post/\" + id} className=\"post__link\">\n              <div className=\"post__title\">\n                {title || 'Вы не передали заголовок поста'}\n              </div>\n              <div className=\"post__body\">\n                {body || 'Вы не передали тело поста'}\n              </div>\n            </Link>\n        }\n        {\n          !this.state.showOption && (\n            <button className=\"post__show-option\"\n                    onClick={() => {\n                      this.setState({showOption: true});\n                    }}>\n              ...\n            </button>\n          )\n        }\n        {\n          this.state.showOption && <>\n            <button className={classNames(\n              \"post__del-post\",\n              {\"post__del-post_visible\": this.state.change}\n            )}\n                    onClick={() => {\n                      dataInteraction(\n                        \"DELETE\",\n                        null,\n                        `posts/${id}`,\n                        () => {\n                          let oldPosts = this.props.posts.slice();\n                          const newPosts = oldPosts.filter(post => post.id !== this.props.id);\n                          this.props.getPosts(newPosts);\n                        },\n                        (error) => console.log(error)\n                      );\n                    }}\n            >\n              <svg width=\"12\" height=\"15\" viewBox=\"0 0 12 15\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M1.31213 14.2766C1.32906 14.6809 1.66176 15 2.06635 15H9.11356C9.51815 15 9.85085 14.6809 9.86778 14.2766L10.371 3.65259H0.808868L1.31213 14.2766ZM7.18412 6.29141C7.18412 6.12213 7.32138 5.98483 7.49074 5.98483H7.98115C8.1504 5.98483 8.28777 6.12209 8.28777 6.29141V12.3612C8.28777 12.5305 8.15051 12.6678 7.98115 12.6678H7.49074C7.32145 12.6678 7.18412 12.5306 7.18412 12.3612V6.29141ZM5.03816 6.29141C5.03816 6.12213 5.17543 5.98483 5.34475 5.98483H5.83516C6.00441 5.98483 6.14175 6.12209 6.14175 6.29141V12.3612C6.14175 12.5305 6.00452 12.6678 5.83516 12.6678H5.34475C5.17546 12.6678 5.03816 12.5306 5.03816 12.3612V6.29141ZM2.89214 6.29141C2.89214 6.12213 3.0294 5.98483 3.19872 5.98483H3.68917C3.85846 5.98483 3.99576 6.12209 3.99576 6.29141V12.3612C3.99576 12.5305 3.85849 12.6678 3.68917 12.6678H3.19872C3.02944 12.6678 2.89214 12.5306 2.89214 12.3612V6.29141Z\"/>\n                <path\n                  d=\"M10.7061 0.772725H7.455V0.158085C7.455 0.0707985 7.38424 0 7.29691 0H3.8829C3.79562 0 3.72485 0.0707985 3.72485 0.158085V0.772688H0.473704C0.212065 0.772688 0 0.98479 0 1.24643V2.73463H11.1798V1.24647C11.1798 0.984827 10.9677 0.772725 10.7061 0.772725Z\"/>\n              </svg>\n            </button>\n            <button className={classNames(\n              \"post__change-post\",\n              {\"post__change-post_visible\": this.state.change}\n            )}\n                    onClick={() => this.setState({change: !this.state.change})}\n            >\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path\n                  d=\"M3.93517 9.78157L1.39876 7.24575L7.5335 1.11245L10.0699 3.64826L3.93517 9.78157ZM1.16168 7.69244L3.48838 10.0186L0 11.18L1.16168 7.69244ZM10.85 2.87166L10.4101 3.3115L7.87034 0.772334L8.31028 0.332496C8.75344 -0.110832 9.47209 -0.110832 9.91525 0.332496L10.85 1.26707C11.29 1.7116 11.29 2.42726 10.85 2.87166Z\"\n                  fill=\"black\"/>\n              </svg>\n            </button>\n          </>\n        }\n      </div>\n    );\n  }\n}\n\nexport default Post;\n","import React, {Component} from 'react';\nimport \"./style.scss\";\nimport {dataInteraction} from \"../fetchs\";\n\nclass CreatePost extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.textInputOne = React.createRef();\n    this.textInputTwo = React.createRef();\n    this.createPostRef = React.createRef();\n    this.state = {\n      openEditing: false\n    }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    let postTitle = this.textInputOne.current.value;\n    let postBody = this.textInputTwo.current.value;\n\n    dataInteraction(\n      \"POST\",\n      {\n        \"title\": postTitle,\n        \"body\": postBody\n      },\n      \"posts\",\n      (result) => {\n        console.log(this.props.posts);\n        let updatedPosts = this.props.posts.slice();\n        updatedPosts.push(JSON.parse(result));\n        this.props.getPosts(updatedPosts);\n\n        postTitle = '';\n        postBody = '';\n        this.setState({openEditing: false});\n      },\n      error => {\n        console.log(error);\n      }\n    );\n  };\n\n  removeListeners = () => {\n    document.removeEventListener(\"click\", this.handleClickOutside);\n    document.removeEventListener(\"keydown\", this.handleKeyUp);\n  };\n\n  addListeners = () => {\n    document.addEventListener(\"click\", this.handleClickOutside);\n    document.addEventListener(\"keydown\", this.handleKeyUp);\n  };\n\n  handleClickOutside = e => {\n    if (!this.createPostRef.current.contains(e.target)) {\n      this.setState({openEditing: false});\n      this.removeListeners();\n    }\n  };\n\n  handleKeyUp = e => {\n    if (e.keyCode === 27) {\n      this.setState({openEditing: false});\n      this.removeListeners();\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (this.state.openEditing && !prevState.openEditing) {\n      this.addListeners();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  render() {\n    const {openEditing} = this.state;\n    return (\n      <div className=\"create-post\"\n           ref={this.createPostRef}\n           onClick={() => this.setState({openEditing: true})}>\n        {\n          openEditing\n            ? <form className=\"create-post__form\" onSubmit={this.handleSubmit}>\n              <input className=\"create-post__input\"\n                     required\n                     type=\"text\"\n                     placeholder=\"Заголовок поста\"\n                     ref={this.textInputOne}/>\n              <input className=\"create-post__input\"\n                     required\n                     type=\"text\"\n                     placeholder=\"Тело поста\"\n                     ref={this.textInputTwo}/>\n              <button className=\"create-post__button\">\n                Создать пост\n              </button>\n            </form>\n            : <div className=\"create-post__plus\">\n              Создать новый пост\n            </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default CreatePost;\n","import React, {Component} from 'react';\n\nimport \"./style.scss\";\nimport PageHeader from \"../../Components/PageHeader\";\nimport Post from \"../../Components/Post\";\nimport CreatePost from \"../../Components/CreatePost\";\n\nimport {connect} from \"react-redux\";\nimport {getPosts} from \"../../../Redux/actions\";\nimport {dataInteraction} from \"../../Components/fetchs\"\n\nclass Posts extends Component {\n  componentDidMount() {\n    dataInteraction(\n      \"GET\",\n      null,\n      \"posts\",\n      (result) => this.props.getPosts(result),\n      (error) => console.log(error)\n    );\n  }\n\n  render() {\n    const {posts, getPosts} = this.props;\n    return (\n      <>\n        <PageHeader/>\n        <div className=\"posts\">\n          <div className=\"container\">\n            <h1>Posts</h1>\n            <div className=\"posts__content\">\n              {\n                posts.length === 0\n                  ? <div>Загрузка...</div>\n                  : posts.map(post => <Post key={post.id} {...post}\n                                            posts={posts}\n                                            getPosts={getPosts}/>)\n              }\n              <CreatePost getPosts={getPosts} posts={posts} />\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = store => ({\n  posts: store.posts,\n});\n\nconst mapDispatchToProps = {\n  getPosts\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Posts);\n","export const getPosts = posts => ({\n  type: \"GET_POSTS\",\n  payload: posts\n});\n\nexport const getPost = post => ({\n  type: \"GET_POST\",\n  payload: post\n});","import React, {Component} from 'react';\nimport \"./style.scss\";\nimport {dataInteraction} from \"../fetchs\";\n\nclass Comments extends Component {\n  constructor(props) {\n    super(props);\n\n    this.textInput = React.createRef();\n    this.state = {\n      value: ''\n    }\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    dataInteraction(\n      \"POST\",\n      {\n        \"postId\": this.props.id,\n        \"body\": this.textInput.current.value\n      },\n      \"comments\",\n      () => {\n        dataInteraction(\n          \"GET\",\n          null,\n          `posts/${this.props.id}?_embed=comments`,\n          (result) => {\n            this.props.getPost(result);\n            this.textInput.current.value = '';\n          },\n          (error) => console.log(error)\n        );\n      },\n    );\n  };\n\n  render() {\n    const {comments} = this.props;\n\n    return (\n      <div className=\"comments\">\n        {\n          comments && comments.length > 0\n            ? comments.map(comment => (\n              <div key={comment.id} className=\"comments__comment\">{comment.body}</div>\n            ))\n            : <div className=\"comments__temporary-text\">{\n              comments\n                ? \"Данный пост еще никто не комментрировал\"\n                : \"Загрузка комментариев\"\n            }</div>\n        }\n        <form className=\"comments__form\" onSubmit={this.handleSubmit}>\n          <input className=\"comments__input\"\n                 required\n                 type=\"text\"\n                 placeholder=\"Введите текст комментария\"\n                 ref={this.textInput}/>\n          <button className=\"comments__button\">Отправить</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default Comments;\n","import React, {Component} from 'react';\nimport PageHeader from \"../../Components/PageHeader\";\nimport \"./style.scss\";\n\nimport {connect} from \"react-redux\";\nimport {getPost} from \"../../../Redux/actions\"\nimport Comments from \"../../Components/Comments\";\n\nclass ViewPost extends Component {\n  componentDidMount() {\n    const id = this.props.match.params.id || \"\";\n\n    fetch(`https://simpleblogapi.herokuapp.com/posts/${id}?_embed=comments`)\n      .then(res => {\n        return res.json();\n      })\n      .then(result => this.props.getPost(result));\n  }\n\n  componentWillUnmount() {\n    this.props.getPost({})\n  }\n\n  render() {\n    const {post, getPost} = this.props;\n    return (\n      <>\n        <PageHeader/>\n        <div className=\"view-post\">\n          <div className=\"container\">\n            <h1>View post</h1>\n            {\n              !post.title && !post.body\n                ? <div>Загрузка информации о посте...</div>\n                : <div className=\"view-post__content\">\n                  <div className=\"view-post__title\">{post.title}</div>\n                  <div>{post.body}</div>\n                </div>\n            }\n            <h1>Comments</h1>\n            <Comments {...post} getPost={getPost}/>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nconst mapStateToProps = store => ({\n  post: store.post,\n});\n\nconst mapDispatchToProps = {\n  getPost\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ViewPost);\n","import React from 'react';\nimport './style.scss';\nimport {Switch, Route} from \"react-router-dom\";\n\nimport Posts from \"./Pages/Posts\"\nimport ViewPost from \"./Pages/ViewPost\"\n\nfunction App() {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={Posts} />\n      <Route path=\"/view-post/:id\" component={ViewPost} />\n    </Switch>\n\n  );\n}\n\nexport default App;\n","const initialState = {\n  posts: [],\n  post: {}\n};\n\nconst changeState = (state = initialState, action) => {\n  switch (action.type) {\n    case \"GET_POSTS\":\n      return {\n        ...state,\n        posts: action.payload\n      };\n    case \"GET_POST\":\n      return {\n        ...state,\n        post: action.payload\n      };\n    default:\n      return state;\n  }\n}\n\nexport default changeState;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport {BrowserRouter} from \"react-router-dom\";\n\nimport {Provider} from \"react-redux\";\nimport {createStore} from \"redux\";\nimport changeState from \"./Redux/reducers\";\n\nconst store = createStore(changeState);\nconsole.log(store);\n\nReactDOM.render(\n  <BrowserRouter>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n\n// import * as serviceWorker from './serviceWorker';\n// serviceWorker.unregister();\n"],"sourceRoot":""}